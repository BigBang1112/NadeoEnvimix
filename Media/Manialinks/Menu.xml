<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<manialink version="3">
		<gauge pos="0 -85" z-index="10" size="150 10" halign="center" valign="center" drawbg="0" id="LoadingBar"/>
	<frame id="menu" hidden="1">
		<quad pos="55 20" z-index="1" size="8 8" bgcolor="FFFA" halign="center" valign="center" style="UIConstruction_Buttons" substyle="Help" scriptevents="1" id="help"/>
		<quad pos="0 5" z-index="0" size="120 120" halign="center" valign="center" scriptevents="1" id="block" hidden="1"/>
		<quad pos="0 45" z-index="0" size="120 40" image="file://Media/Images/NadeoEnvimix2.png" halign="center" valign="center" manialink="nadeoenvimix" id="logo"/>
		<frame pos="0 -52" id="footer" scale="1">
			<quad z-index="0" size="110 6" bgcolor="0008" valign="center" halign="center" pos="0 -3"/>
			<label z-index="1" size="110 6" text="Made by $iBigBang1112 & Poutrel" valign="center2" textsize="1" halign="center" style="TextButtonBig" pos="0 -3" manialink="nadeoenvimix?about"/>
		</frame>
		
		<label pos="-58 -40" z-index="1" size="20 5" text="FEEDBACK" valign="center2" textsize=".5" style="TextCardMedium" halign="right" textemboss="1" url="maniaplanet://#mailto=bigbang1112"/>
		<label pos="-58 -45" z-index="1" size="20 5" text="PRIVACY POLICY" valign="center2" textsize=".5" style="TextCardMedium" manialink="nadeoenvimix?privacy" halign="right" textemboss="1"/>
		
		<quad pos="0 -15" z-index="-1" size="110 70" bgcolor="0008" halign="center" valign="center"/>		
		<frame id="buttons">
			<frame pos="0 5" id="buttonPlay">
				<quad pos="0 0" z-index="0" size="100 20" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="100 20" text="Play" halign="center" valign="center2" style="TextTitle3" textsize="8 " id="text"/>
			</frame>
			<frame pos="-26 -12" id="buttonStatistics">
				<quad pos="0 0" z-index="0" size="48 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="48 10" text="Statistics" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
			<frame pos="-26 -24" id="buttonProfile">
				<quad pos="0 0" z-index="0" size="48 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="48 10" text="Profile" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
			<frame pos="-26 -40" id="buttonExit">
				<quad pos="0 0" z-index="0" size="48 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="48 10" text="Exit" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
			<frame pos="25 -26" id="buttonTrack">
				<quad z-index="0" size="50 38" bgcolor="000F" scriptevents="1" opacity=".9" id="button" halign="center" valign="center" pos="0 0"/>
				<label pos="0 14" z-index="1" size="50 10" text="Track of the Day" style="TextTitle3" halign="center" valign="center2" textsize="1" id="text"/>
				<frame z-index="1" scale="1.05" id="track">
					<quad pos="0 9" size="50 25" halign="center" image="file://Media/Thumbnails/Loading.jpg" id="thumbnail"/>
					<label pos="-22 -14" z-index="1" size="45 5" text="LOADING..." valign="bottom" style="TextTitle3" textsize="2" id="name"/>
				</frame>
			</frame>
		</frame>
	</frame>
	<frame id="selection" z-index="1" hidden="1">
		<quad pos="-160 89.8" z-index="-1" size="320 180" scriptevents="1"/>
		<quad pos="-140 70" z-index="0" size="3 140" bgcolor="444A"/>
		<quad pos="88 70" z-index="0" size="49 12.5" bgcolor="444A"/>
		<quad pos="88 57.5" z-index="0" size="49 127.5" bgcolor="000A"/>
		<quad pos="-137 57.5" z-index="0" size="217 127.5" bgcolor="000A"/>
		<quad pos="-137 70" z-index="0" size="217 12.5" bgcolor="444A"/>
		<quad pos="80 70" z-index="0" size="3 140" bgcolor="444A"/>
		<quad pos="83 60" z-index="0" size="2 30" bgcolor="000A"/>
		<quad pos="85 70" z-index="0" size="3 140" bgcolor="444A"/>
		<quad pos="137 70" z-index="0" size="3 140" bgcolor="444A"/>
		
		<quad pos="140 70" z-index="1" size="10 10" bgcolor="FFFA" id="help" halign="center" valign="center" style="UIConstruction_Buttons" substyle="Help" scriptevents="1"/>
		
		<label pos="-130 64" z-index="1" size="40 10" text="Canyon" style="TextTitle3" textsize="3" valign="center" scale="1.25" id="labelEnvironment"/>
		
		<frame pos="112.5 66" z-index="1">
			<label pos="0 0" z-index="0" size="45 5" text="Menu" style="TextTitle3" halign="center" textsize="4"/>
		</frame>
		
		<quad pos="-135 55" z-index="1" size="200 2" bgcolor="FFFF" opacity=".75" id="difficultyBar"/>
		
		<frame pos="-135 50" id="maps" z-index="1">
			<frame pos="20 -10" id="01">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A01" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="60 -10" id="02">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A02" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="100 -10" id="03">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A03" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="140 -10" id="04">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A04" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="180 -10" id="05">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A05" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
				
			<frame pos="20 -30" id="06">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A06" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="60 -30" id="07">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A07" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="100 -30" id="08">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A08" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="140 -30" id="09">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A09" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="180 -30" id="10">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A10" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
			</frame>
				
			<frame pos="20 -50" id="11">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A11" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="60 -50" id="12">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A12" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="100 -50" id="13">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A13" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="140 -50" id="14">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A14" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
			<frame pos="180 -50" id="15">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center" id="Thumbnail"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A15" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name" textemboss="1"/>
				<label pos="-17 7" z-index="3" size="20 5" text="000000" style="TextSPScoreBig" textsize="2" id="Skillpoints" textemboss="1"/>
				<label pos="17 7" z-index="3" size="20 5" text="DESELECT" halign="right" textsize="0.5" style="TextButtonBig" scriptevents="1" id="Deselect" hidden="1"/>
			</frame>
		</frame>
		
		<quad z-index="0" size="200 50" bgcolor="000A" pos="-135 -15"/>
		<quad pos="-20 -20" z-index="1" size="80 40" bgcolor="000A"/>
		<frame pos="-20 -20" id="Scanner" z-index="2">
			<label z-index="0" size="30 5" text="USERNAME" pos="61 -12" valign="center2" textsize="1" id="Username" halign="center"/>
			<label z-index="0" size="30 5" text="0" pos="61 -16" halign="center" textsize="4" style="TextSPScoreBig" id="Skillpoints"/>
			<label z-index="0" size="30 5" text="$58f0" pos="61 -21" halign="center" textsize="4" style="TextSPScoreBig" id="ActivityPoints"/>
			<label z-index="0" size="30 5" text="0:00:00" pos="61 -32" valign="center2" textsize="3" id="PB" halign="center" textfont="RajdhaniMono"/>
			
			<label pos="22.5 -5" z-index="0" size="28 5" text="WORLD" valign="center2" textsize="1" halign="center" style="TextTitle3" id="Zone"/>
			<quad pos="5 -5" z-index="0" size="7.5 7.5" bgcolor="FFFA" halign="center" valign="center" style="Icons64x64_1" substyle="ArrowPrev" scriptevents="1" id="ZonePrev"/>
			<quad pos="40 -5" z-index="0" size="7.5 7.5" bgcolor="FFFA" halign="center" valign="center" style="Icons64x64_1" substyle="ArrowNext" scriptevents="1" id="ZoneNext"/>
			
			<label pos="61.25 -5" z-index="0" size="25 5" text="$o$nCanyonCar" valign="center2" textsize="2" halign="center" id="Car"/>
			<quad pos="47.5 -5" z-index="0" size="7.5 7.5" bgcolor="FFFA" halign="center" valign="center" style="Icons64x64_1" substyle="ArrowPrev" scriptevents="1" id="CarPrev"/>
			<quad pos="75 -5" z-index="0" size="7.5 7.5" bgcolor="FFFA" halign="center" valign="center" style="Icons64x64_1" substyle="ArrowNext" scriptevents="1" id="CarNext"/>
			
			<quad pos="22.5 -22.5" z-index="2" size="10 10" bgcolor="FFFA" halign="center" valign="center" style="BgRaceScore2" substyle="SandTimer" id="LeaderboardLoading"/>
			<label pos="22.5 -22.5" z-index="2" size="25 10"  text="$f00ERROR" halign="center" valign="center" textemboss="1" id="LeaderboardError" textfont="RajdhaniMono" hidden="1"/>
			<frame id="Leaderboard" z-index="1">
				<frame pos="2 -9">
					<label size="20 3" text="USERNAME" textsize="1"/>
					<label pos="40 0" z-index="0" size="20 3" text="0:00:00" textsize="1" halign="right" style="TextTitle3"/>
				</frame>
				<frame pos="2 -12">
					<label size="20 3" text="USERNAME" textsize="1"/>
					<label pos="40 0" z-index="0" size="20 3" text="0:00:00" textsize="1" halign="right" style="TextTitle3"/>
				</frame>
				<frame pos="2 -15">
					<label size="20 3" text="USERNAME" textsize="1"/>
					<label pos="40 0" z-index="0" size="20 3" text="0:00:00" textsize="1" halign="right" style="TextTitle3"/>
				</frame>
				<frame pos="2 -18">
					<label size="20 3" text="USERNAME" textsize="1"/>
					<label pos="40 0" z-index="0" size="20 3" text="0:00:00" textsize="1" halign="right" style="TextTitle3"/>
				</frame>
				<frame pos="2 -21">
					<label size="20 3" text="USERNAME" textsize="1"/>
					<label pos="40 0" z-index="0" size="20 3" text="0:00:00" textsize="1" halign="right" style="TextTitle3"/>
				</frame>
				<frame pos="2 -24">
					<label size="20 3" text="USERNAME" textsize="1"/>
					<label pos="40 0" z-index="0" size="20 3" text="0:00:00" textsize="1" halign="right" style="TextTitle3"/>
				</frame>
				<frame pos="2 -27">
					<label size="20 3" text="USERNAME" textsize="1"/>
					<label pos="40 0" z-index="0" size="20 3" text="0:00:00" textsize="1" halign="right" style="TextTitle3"/>
				</frame>
				<frame pos="2 -30">
					<label size="20 3" text="USERNAME" textsize="1"/>
					<label pos="40 0" z-index="0" size="20 3" text="0:00:00" textsize="1" halign="right" style="TextTitle3"/>
				</frame>
				<frame pos="2 -33">
					<label size="20 3" text="USERNAME" textsize="1"/>
					<label pos="40 0" z-index="0" size="20 3" text="0:00:00" textsize="1" halign="right" style="TextTitle3"/>
				</frame>
				<frame pos="2 -36">
					<label size="20 3" text="USERNAME" textsize="1"/>
					<label pos="40 0" z-index="0" size="20 3" text="0:00:00" textsize="1" halign="right" style="TextTitle3"/>
				</frame>
			</frame>
		</frame>
		<frame pos="-135 -15" z-index="1" id="Panel" hidden="0">
			<quad z-index="0" size="10 10" bgcolor="FFFA" halign="center" valign="center" id="Lock" style="Icons64x64_1" substyle="StatePrivate" pos="30 -10" scriptevents="1" hidden="1"/>
			<label pos="5 -6" z-index="0" size="20 10" text="..." textsize="8" style="TextTitle3" id="Name"/>
			
			<frame pos="5 -23" id="TableTrackRating">
				<label pos="0 0" z-index="0" size="25 5" text="CanyonCar" textsize="2" valign="center" scriptevents="1" style="TextCardRaceRank" id="PlayCanyonCar"/>
				<label pos="0 -5" z-index="0" size="25 5" text="StadiumCar" textsize="2" valign="center" scriptevents="1" style="TextCardRaceRank" id="PlayStadiumCar"/>
				<label pos="0 -10" z-index="0" size="25 5" text="ValleyCar" textsize="2" valign="center" scriptevents="1" style="TextCardRaceRank" id="PlayValleyCar"/>
				<label pos="0 -15" z-index="0" size="25 5" text="LagoonCar" textsize="2" valign="center" scriptevents="1" style="TextCardRaceRank" id="PlayLagoonCar"/>
				
				<label pos="0 -20" z-index="0" size="25 5" text="CAR" style="TextTitle3" textsize="1"/>
				<label pos="25 -20" z-index="0" size="25 5" text="DIFFICULTY" style="TextTitle3" textsize="1"/>
				<label pos="65 -20" z-index="0" size="25 5" text="QUALITY" style="TextTitle3" textsize="1"/>
				
				<gauge pos="23 0" z-index="0" size="40 10" valign="center" drawbg="0" id="DifficultyCanyonCar"/>
				<gauge pos="23 -5" z-index="0" size="40 10" valign="center" drawbg="0" id="DifficultyStadiumCar"/>
				<gauge pos="23 -10" z-index="0" size="40 10" valign="center" drawbg="0" id="DifficultyValleyCar"/>
				<gauge pos="23 -15" z-index="0" size="40 10" valign="center" drawbg="0" id="DifficultyLagoonCar"/>
				
				<gauge pos="63 0" z-index="0" size="40 10" valign="center" drawbg="0" id="QualityCanyonCar"/>
				<gauge pos="63 -5" z-index="0" size="40 10" valign="center" drawbg="0" id="QualityStadiumCar"/>
				<gauge pos="63 -10" z-index="0" size="40 10" valign="center" drawbg="0" id="QualityValleyCar"/>
				<gauge pos="63 -15" z-index="0" size="40 10" valign="center" drawbg="0" id="QualityLagoonCar"/>
				
				<quad pos="101 0" z-index="1" size="5 5" bgcolor="FFFA" halign="center" valign="center" style="BgRaceScore2" substyle="Fame" id="MarkedCanyonCar"/>
				<quad pos="101 -5" z-index="1" size="5 5" bgcolor="FFFA" halign="center" valign="center" style="BgRaceScore2" substyle="Fame" id="MarkedStadiumCar"/>
				<quad pos="101 -10" z-index="1" size="5 5" bgcolor="FFFA" halign="center" valign="center" style="BgRaceScore2" substyle="Fame" id="MarkedValleyCar"/>
				<quad pos="101 -15" z-index="1" size="5 5" bgcolor="FFFA" halign="center" valign="center" style="BgRaceScore2" substyle="Fame" id="MarkedLagoonCar"/>
			</frame>
			
		</frame>
		
		<quad pos="80 50" z-index="1" size="1 22" bgcolor="FFFC" halign="right"/>
		<quad pos="80 28" z-index="1" size="1 22" bgcolor="0F0C" halign="right"/>
		<quad pos="80 6" z-index="1" size="1 22" bgcolor="00FC" halign="right"/>
		<quad pos="80 -16" z-index="1" size="1 22" bgcolor="F00C" halign="right"/>
		<quad pos="80 -38" z-index="1" size="1 22" bgcolor="000C" halign="right"/>
		
		<frame pos="72.5 50" z-index="1" id="slider">
			<quad pos="0 5" z-index="0" size="10 120" bgcolor="000A" halign="center" scriptevents="1" id="QuadBack"/>
			<quad z-index="1" size="8 22" bgcolor="AAAA" halign="center" id="button" scriptevents="1" pos="0 0"/>
		</frame>
		
		<frame id="buttonsSelection" z-index="1">
			<frame pos="-45 -25" id="buttonPlay">
				<quad pos="0 0" z-index="0" size="40 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="40 10" text="Play" halign="center" valign="center2" style="TextTitle3" id="text"/>
			</frame>
		
			<frame pos="15 63.5" id="buttonMostInteresting">
				<quad pos="0 0" z-index="0" size="40 8" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="40 8" text="Most Interesting" halign="center" valign="center2" style="TextTitle3" textsize="1" id="text"/>
			</frame>
			<frame pos="60 63.5" id="buttonMostDifficult">
				<quad pos="0 0" z-index="0" size="40 8" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="40 8" text="Most Difficult" halign="center" valign="center2" style="TextTitle3" textsize="1" id="text"/>
			</frame>
		
			<frame pos="112.5 50" id="buttonCanyon">
				<quad z-index="0" size="49 10" bgcolor="000" halign="center" valign="center" id="button" scriptevents="1"/>
				<quad z-index="1" size="40 8" bgcolor="000" halign="center" valign="center" image="file://Media/CanyonButton.jpg" opacity=".75"/>
				<label pos="0 0" z-index="2" size="49 10" text="Canyon" halign="center" valign="center2" style="TextTitle3" textsize="2" textemboss="1"/>
			</frame>
			<frame pos="112.5 39" id="buttonStadium">
				<quad z-index="0" size="49 10" bgcolor="000" halign="center" valign="center" id="button" scriptevents="1"/>
				<quad z-index="1" size="40 8" bgcolor="000" halign="center" valign="center" image="file://Media/StadiumButton.jpg" opacity=".75"/>
				<label pos="0 0" z-index="2" size="49 10" text="Stadium" halign="center" valign="center2" style="TextTitle3" textsize="2" textemboss="1"/>
			</frame>
			<frame pos="112.5 28" id="buttonValley">
				<quad z-index="0" size="49 10" bgcolor="000" halign="center" valign="center" id="button" scriptevents="1"/>
				<quad z-index="1" size="40 8" bgcolor="000" halign="center" valign="center" image="file://Media/ValleyButton.jpg" opacity=".75"/>
				<label pos="0 0" z-index="2" size="49 10" text="Valley" halign="center" valign="center2" style="TextTitle3" textsize="2" textemboss="1"/>
			</frame>
			<frame pos="112.5 17" id="buttonLagoon">
				<quad z-index="0" size="49 10" bgcolor="000" halign="center" valign="center" id="button" scriptevents="1"/>
				<quad z-index="1" size="40 8" bgcolor="000" halign="center" valign="center" image="file://Media/LagoonButton.jpg" opacity=".75"/>
				<label pos="0 0" z-index="2" size="49 10" text="Lagoon" halign="center" valign="center2" style="TextTitle3" textsize="2" textemboss="1"/>
			</frame>
		
			<frame pos="112.5 0" z-index="1" id="buttonPlayOnline">
				<quad pos="0 0" size="49 20" bgcolor="000" scriptevents="1" opacity=".9" id="button" halign="center" valign="center"/>
				<label pos="0 0" z-index="1" size="49 20" text="Play Online" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
		
			<frame pos="112.5 -17" z-index="1" id="buttonPlayLocally">
				<quad pos="0 0" size="49 10" bgcolor="111" halign="center" valign="center" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="49 10" text="Play Locally" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
			
			<frame pos="112.5 -35" z-index="1" id="buttonCustomCars">
				<quad pos="0 0" size="49 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="49 10" text="Custom Cars" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
		
			<frame pos="112.5 -60" z-index="1" id="buttonBack">
				<quad pos="0 0" size="49 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="49 10" text="Back" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
		</frame>
	</frame>
	<frame id="FrameCustomCars" z-index="2" hidden="1">
		<quad z-index="0" size="200 100" bgcolor="000A" halign="center" valign="center"/>
		
		<frame pos="-95 35" z-index="1" id="FrameList">
			<quad pos="0 0" z-index="0" size="135 8" valign="center" style="BgsPlayerCard" substyle="BgCard" scriptevents="1"/>
			<entry pos="5 0" z-index="1" size="125 5" default="" valign="center2" textsize="2" id="EntryCar1"/>
			<quad pos="0 -10" z-index="0" size="135 8" valign="center" style="BgsPlayerCard" substyle="BgCard" scriptevents="1"/>
			<entry pos="5 -10" z-index="1" size="125 5" default="" valign="center2" textsize="2" id="EntryCar2"/>
			<quad pos="0 -20" z-index="0" size="135 8" valign="center" style="BgsPlayerCard" substyle="BgCard" scriptevents="1"/>
			<entry pos="5 -20" z-index="1" size="125 5" default="" valign="center2" textsize="2" id="EntryCar3"/>
			<quad pos="0 -30" z-index="0" size="135 8" valign="center" style="BgsPlayerCard" substyle="BgCard" scriptevents="1"/>
			<entry pos="5 -30" z-index="1" size="125 5" default="" valign="center2" textsize="2" id="EntryCar4"/>
			<quad pos="0 -40" z-index="0" size="135 8" valign="center" style="BgsPlayerCard" substyle="BgCard" scriptevents="1"/>
			<entry pos="5 -40" z-index="1" size="125 5" default="" valign="center2" textsize="2" id="EntryCar5"/>
		</frame>
		
		<label pos="-95 -24" z-index="1" size="135 20" text="Because of Maniaplanet limitations, we have to follow some rules. Use CREATE button to setup and manage cars you wanna use. Once you do that, you have 5 slots to put your cars into. Type the exact full car name with extension, like $oLowGravity.Item.Gbx$z. Remember that if you misspell the car name, the whole gamemode will crash immediately." textsize="2" autonewline="1"/>
		
		<frame id="buttonsCustomCars" z-index="1">
			<frame pos="70 -28" id="buttonCreate">
				<quad pos="0 0" z-index="0" size="50 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="50 10" text="Create" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
			<frame pos="70 -40" id="buttonBack">
				<quad pos="0 0" z-index="0" size="50 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="50 10" text="Back" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
		</frame>
	</frame>
	<script>
	<!--
		#Include "TextLib" as TextLib
		#Include "MathLib" as MathLib
		#Include "AnimLib" as AnimLib
		
		declare Integer StartTime;
		declare CAudioSource SoundHover;
		declare CAudioSource SoundClick;
		declare CAudioSource SoundElectric;
		
		declare CHttpRequest TrackOfTheDayRequest;
		declare CHttpRequest MapBriefListRequest;
		
		declare CXmlDocument MapBriefDocument;
		
		Text[Text][Text] ThumbnailList() {
			declare Thumbnails = Text[Text][Text];
			declare Envis = ["Canyon","Stadium","Valley","Lagoon"];
			
			Thumbnails["Canyon"] = Text[Text];
			Thumbnails["Stadium"] = Text[Text];
			Thumbnails["Valley"] = Text[Text];
			Thumbnails["Lagoon"] = Text[Text];
			
			foreach(Env,Envis) {
				for(i,0,4) {
					declare Diff = "";
				
					switch(i) {
						case 0: Diff = "A";
						case 1: Diff = "B";
						case 2: Diff = "C";
						case 3: Diff = "D";
						case 4: Diff = "E";
					}
				
					for(j,1,15) {
						declare Mapp = "";
						if(j < 10) Mapp = "0"^j;
						else Mapp = ""^j;
						
						Thumbnails[Env][Diff^Mapp] = "file://Media/Thumbnails/NoThumbnail.jpg";
					}
				}
				
				declare CTaskResult_FileList List = DataFileMgr.Media_GetGameList (CDataFileMgr::EMediaType::Image, "Thumbnails/"^Env, False);
				wait(List.HasSucceeded);
				
				foreach(File,List.Files) {
					Thumbnails[Env][TextLib::SubString(File,TextLib::Length(File) - 7,3)] = "file://Media/"^File;
				}
				
				DataFileMgr.TaskResult_Release(List.Id);
			}
			
			return Thumbnails;
		}
		
		Boolean IsMenuShown() {
			return (Page.GetFirstChild("footer").RelativeScale == 1.0);
		}
		
		Void ShowMenu(Integer _StartTime) {
			declare Time = Now - _StartTime;
		
			Page.GetFirstChild("menu").Show();
		
			Page.GetFirstChild("logo").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime, 0.0, 1.0, 1000);
			Page.GetFirstChild("menu").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 100, 0.0, 1.0, 1000);
			Page.GetFirstChild("footer").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 200, 0.0, 1.0, 1000);
			
			Page.GetFirstChild("buttonPlay").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 300, 0.0, 1.0, 500);
			Page.GetFirstChild("buttonStatistics").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 400, 0.0, 1.0, 500);
			Page.GetFirstChild("buttonProfile").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 500, 0.0, 1.0, 500);
			Page.GetFirstChild("buttonExit").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 600, 0.0, 1.0, 500);
			Page.GetFirstChild("buttonTrack").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 400, 0.0, 1.0, 500);
			
			((Page.GetFirstChild("menu") as CMlFrame).GetFirstChild("help") as CMlQuad).Opacity = AnimLib::EaseOutCubic(Now - _StartTime - 1200, 0.0, 1.0, 500);
		}
		
		Integer HideMenu(Integer _StartTime, Text _Action) {
			declare Time = Now - _StartTime;
			
			if(Time > 0 && Time < 100)
				Page.GetFirstChild("menu").Hide();
			else if(Time > 150 && Time < 250)
				Page.GetFirstChild("menu").Hide();
			else if(Time > 300 && Time < 350)
				Page.GetFirstChild("menu").Hide();
			else if(Time > 400)
				Page.GetFirstChild("menu").Hide();
			else
				Page.GetFirstChild("menu").Show();
				
			if(Time > 400 && _Action != "") SendCustomEvent("COMMAND_EXIT", Text[]);
				
			return Time;
		}
		
		Real GetSliderValue() {
			return (Page.GetFirstChild("slider") as CMlFrame).GetFirstChild("button").RelativePosition_V3.Y / -88.0;
		}
		
		Integer GetDifficulty() {
			return MathLib::NearestInteger(GetSliderValue() * 4.0);
		}
		
		declare Text Environment;
		declare Text[] Maps;
		declare Integer LastDifficulty;
		declare Integer DifficultySwitchTime;
		
		declare Integer SelectEnvironment;
		declare Integer SelectDifficulty;
		declare Integer SelectMap;
		
		Void AnimateMaps(Integer _StartTime) {
			declare Time = _StartTime;
			
			for(i,1,15) {
				declare Map = ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("maps") as CMlFrame).Controls[i - 1];
				
				Map.RelativeScale = 0.75 + AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 500) * .25;
				
				if(GetDifficulty() == 4 && i > 5) {
					Map.Hide();
				}
				else {
					Map.Show();
				
					foreach(Control,(Map as CMlFrame).Controls) {
						if(Control is CMlQuad && Control.ControlId != "hover")
							(Control as CMlQuad).Opacity = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 500);
						else if(Control is CMlLabel) {
							(Control as CMlLabel).Opacity = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 500);
							
							if(Control.ControlId == "name")
								(Control as CMlLabel).SetText(Maps[i]);
						}
					}
					Time+=20;
				}
			}
		}
		
		declare Text TrackDayEnvironment;
		declare Text TrackDayDifficulty;
		declare Text TrackDayMap;
		
		Void HandleRequests() {
			if(TrackOfTheDayRequest != Null) {
				if(TrackOfTheDayRequest.IsCompleted) {
					if(TrackOfTheDayRequest.StatusCode == 200) {
						declare Doc = Xml.Create(TrackOfTheDayRequest.Result);
						declare NodeEnvironment = Doc.Root.GetFirstChild("Environment");
						declare NodeDifficulty = Doc.Root.GetFirstChild("Difficulty");
						declare NodeMap = Doc.Root.GetFirstChild("Map");
						
						switch(NodeDifficulty.TextContents) {
							case "A": TrackDayDifficulty = "0";
							case "B": TrackDayDifficulty = "1";
							case "C": TrackDayDifficulty = "2";
							case "D": TrackDayDifficulty = "3";
							case "E": TrackDayDifficulty = "4";
						}
						
						TrackDayEnvironment = NodeEnvironment.TextContents;
						TrackDayMap = NodeMap.TextContents;
						
						declare Map = "";
						if(TextLib::ToInteger(TrackDayMap) < 10) Map = "0"^TrackDayMap;
						else Map = TrackDayMap;
						
						(((Page.GetFirstChild("buttonTrack") as CMlFrame).GetFirstChild("track") as CMlFrame).GetFirstChild("name") as CMlLabel).SetText(NodeEnvironment.TextContents ^ " " ^ NodeDifficulty.TextContents ^ Map);
						(((Page.GetFirstChild("buttonTrack") as CMlFrame).GetFirstChild("track") as CMlFrame).GetFirstChild("thumbnail") as CMlQuad).ChangeImageUrl("file://Media/Thumbnails/NoThumbnail.jpg");
						
						Xml.Destroy(Doc);
					}
					else {
						(((Page.GetFirstChild("buttonTrack") as CMlFrame).GetFirstChild("track") as CMlFrame).GetFirstChild("name") as CMlLabel).SetText("Not found");
						(((Page.GetFirstChild("buttonTrack") as CMlFrame).GetFirstChild("track") as CMlFrame).GetFirstChild("thumbnail") as CMlQuad).ChangeImageUrl("file://Media/Thumbnails/Unknown.jpg");
					}
					
					Http.Destroy(TrackOfTheDayRequest);
					TrackOfTheDayRequest = Null;
				}
			}
			if(MapBriefListRequest != Null) {
				if(MapBriefListRequest.IsCompleted) {
					if(MapBriefListRequest.StatusCode == 200) {
						MapBriefDocument = Xml.Create(MapBriefListRequest.Result);
					}
					else {
					
					}
					
					Http.Destroy(MapBriefListRequest);
					MapBriefListRequest = Null;
				}
			}
		}
		
		declare CTaskResult_NaturalLeaderBoardInfoList LeaderboardRequest;
		
		Void HandleScoreRequests() {
			if(LeaderboardRequest != Null) {
				if(!LeaderboardRequest.IsProcessing) {
					if(LeaderboardRequest.HasSucceeded) {
						(Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("LeaderboardLoading").Hide();
						(Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("Leaderboard").Show();
					}
					else if(LeaderboardRequest.HasFailed) {
						(Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("LeaderboardLoading").Hide();
						(Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("LeaderboardError").Show();
					}
					else if(LeaderboardRequest.IsCanceled) {
						(Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("LeaderboardLoading").Hide();
					}
					
					log(LeaderboardRequest.ErrorType);
					log(LeaderboardRequest.ErrorCode);
					log(LeaderboardRequest.ErrorDescription);
					
					ScoreMgr.TaskResult_Release(LeaderboardRequest.Id);
					LeaderboardRequest = Null;
				}
			}
		}
		
		Void LoadCustomCars() {
			declare persistent Text[] NEM_CustomCars for LocalUser;
			
			if(NEM_CustomCars.count == 0) {
				for(i,0,4) {
					NEM_CustomCars.add("");
				}
			}
			
			declare Frame <=> ((Page.GetFirstChild("FrameCustomCars") as CMlFrame).GetFirstChild("FrameList") as CMlFrame);
		
			for(i,0,4) {
				(Frame.Controls[i*2 + 1] as CMlEntry).SetText(NEM_CustomCars[i],False);
			}
		}
		
		Void DeselectAll() {
			Page.GetFirstChild("Lock").Hide();
			SelectEnvironment = -1;
			SelectDifficulty = -1;
			SelectMap = -1;
						
			foreach(Tile,(Page.GetFirstChild("maps") as CMlFrame).Controls) {
				(Tile as CMlFrame).DataAttributeSet("hover","false");
				
				(Tile as CMlFrame).GetFirstChild("select").Hide();
			}
			
			declare Panel <=> ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("Panel") as CMlFrame);
					
			(Panel.GetFirstChild("Name") as CMlLabel).SetText("...");
						
			(Panel.GetFirstChild("DifficultyCanyonCar") as CMlGauge).SetRatio(0.0);
			(Panel.GetFirstChild("DifficultyStadiumCar") as CMlGauge).SetRatio(0.0);
			(Panel.GetFirstChild("DifficultyValleyCar") as CMlGauge).SetRatio(0.0);
			(Panel.GetFirstChild("DifficultyLagoonCar") as CMlGauge).SetRatio(0.0);
			(Panel.GetFirstChild("QualityCanyonCar") as CMlGauge).SetRatio(0.0);
			(Panel.GetFirstChild("QualityStadiumCar") as CMlGauge).SetRatio(0.0);
			(Panel.GetFirstChild("QualityValleyCar") as CMlGauge).SetRatio(0.0);
			(Panel.GetFirstChild("QualityLagoonCar") as CMlGauge).SetRatio(0.0);
		}
		
		declare Text[] Zones;
		declare Integer CurrentZone;
		
		declare Text[] Cars;
		declare Integer CurrentCar;
		
		Void ReloadLeaderboard(Integer _CampaignId) {
			(Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("LeaderboardLoading").Show();
			
			declare UID = DataFileMgr.Campaigns[_CampaignId].MapGroups[SelectDifficulty].MapInfos[SelectMap - 1].MapUid;
			
			LeaderboardRequest = ScoreMgr.MapLeaderBoard_GetPlayerList(NullId, UID, Cars[CurrentCar], "World", 1, 10);
			log(ScoreMgr.MapLeaderBoard_GetPlayerCount(UID, Cars[CurrentCar], "World"));
		}
		
		Void RefreshTrack() {		
			declare Integer CampaignID;
			
			switch(Environment) {
				case "Canyon": CampaignID = 0;
				case "Stadium": CampaignID = 1;
				case "Valley": CampaignID = 2;
				case "Lagoon": CampaignID = 3;
			}
		
			declare UID = DataFileMgr.Campaigns[CampaignID].MapGroups[SelectDifficulty].MapInfos[SelectMap - 1].MapUid;
			
			declare Time = ScoreMgr.Map_GetRecord(NullId, UID, Cars[CurrentCar]);
			declare Skillpoints = ScoreMgr.Map_GetSkillPoints(NullId, UID, Cars[CurrentCar]);
			
			if(Time == -1) ((Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("PB") as CMlLabel).SetText("UNFINISHED");
			else ((Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("PB") as CMlLabel).SetText(TextLib::TimeToText(Time,True)^TextLib::SubText(""^Time,TextLib::Length(""^Time)-1,1));
			
			((Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("Skillpoints") as CMlLabel).SetText(""^Skillpoints);
			
			ReloadLeaderboard(CampaignID);
		}
		
		declare Text[Text][Text] Thumbnails;
		
		Void UpdateThumbnails() {
			declare Mapz <=> ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("maps") as CMlFrame);
			declare Diff = GetDifficulty();
				
			for(i,1,15) {
				declare Number = "";
				if(i < 10) Number = "0"^i;
				else Number = i^"";
									
				switch(Diff) {
					case 0: { Maps[i] = "A"^Number;
						((Mapz.Controls[i-1] as CMlFrame).GetFirstChild("Thumbnail") as CMlQuad).ChangeImageUrl(Thumbnails[Environment]["A"^Number]);
					}
					case 1: { Maps[i] = "B"^Number;
						((Mapz.Controls[i-1] as CMlFrame).GetFirstChild("Thumbnail") as CMlQuad).ChangeImageUrl(Thumbnails[Environment]["B"^Number]);
					}
					case 2: { Maps[i] = "C"^Number;
						((Mapz.Controls[i-1] as CMlFrame).GetFirstChild("Thumbnail") as CMlQuad).ChangeImageUrl(Thumbnails[Environment]["C"^Number]);
					}
					case 3: { Maps[i] = "D"^Number;
						((Mapz.Controls[i-1] as CMlFrame).GetFirstChild("Thumbnail") as CMlQuad).ChangeImageUrl(Thumbnails[Environment]["D"^Number]);
					}
					case 4: { Maps[i] = "E"^Number;
						((Mapz.Controls[i-1] as CMlFrame).GetFirstChild("Thumbnail") as CMlQuad).ChangeImageUrl(Thumbnails[Environment]["E"^Number]);
					}
				}
			}
		}
	
		Void OnInit() {
			SoundHover = Audio.CreateSound("file://Media/Sounds/Hover.ogg");
			SoundClick = Audio.CreateSound("file://Media/Sounds/Click.ogg");
			SoundElectric = Audio.CreateSound("file://Media/Sounds/Electric.ogg");
			
			Zones = TextLib::Split("|",LocalUser.ZonePath);
			Cars = ["CanyonCar","StadiumCar","ValleyCar","LagoonCar"];
			
			Thumbnails = ThumbnailList();
			
			SelectEnvironment = -1;
			
			declare ThumbnailProceed = 0.0;
			
			foreach(ThumbnailsCampaign,Thumbnails) {
				foreach(Thumb,ThumbnailsCampaign) {
					PreloadImage(Thumb);
					ThumbnailProceed+=1;
					(Page.GetFirstChild("LoadingBar") as CMlGauge).SetRatio(ThumbnailProceed / (4*65));
					yield;
				}
			}
		}
		
		Void OnStart() {
			(Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("Leaderboard").Hide();
			
			((Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("Username") as CMlLabel).SetText(LocalUser.Name);
			
			Environment = "Canyon";
			
			Maps.add("");
			
			for(i,1,15) {
				declare Number = "";
				if(i < 10) Number = "0"^i;
				else Number = i^"";
			
				Maps.add("");
				Maps[i] = "A"^Number;
			}
			
			TrackOfTheDayRequest = Http.CreateGet("http://trackmania.bigbang1112.eu/nadeoenvimix/api/track_day.php");
			MapBriefListRequest = Http.CreateGet("http://trackmania.bigbang1112.eu/nadeoenvimix/api/map_list_brief.php");
		
			StartTime = Now;
			Page.GetFirstChild("menu").DataAttributeSet("time",StartTime^"");
		}
		
		Void OnLoop() {
			(Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("LeaderboardLoading").RelativeRotation+=1;
		
			if(SelectEnvironment == -1) Page.GetFirstChild("Scanner").Hide();
			else Page.GetFirstChild("Scanner").Show();
			
			((Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("Zone") as CMlLabel).SetText(Zones[CurrentZone]);
			((Page.GetFirstChild("Scanner") as CMlFrame).GetFirstChild("Car") as CMlLabel).SetText("$o$n"^Cars[CurrentCar]);
		
			(Page.GetFirstChild("labelEnvironment") as CMlLabel).SetText(Environment);	
			
			foreach(Map,((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("maps") as CMlFrame).Controls) {
				declare Time = TextLib::ToInteger(Map.DataAttributeGet("hover_time"));
				declare Value = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 200);
				
				if(Map.DataAttributeGet("hover") == "true") {
					((Map as CMlFrame).GetFirstChild("hover") as CMlQuad).Opacity = Value * .25;
				}
				else {
					((Map as CMlFrame).GetFirstChild("hover") as CMlQuad).Opacity = .25 - Value * .25;
				}
			}
			
			declare Time = Now - StartTime;
			
			if(Time > 0 && Time < 100)
				Page.GetFirstChild("LoadingBar").Hide();
			else if(Time > 150)
				Page.GetFirstChild("LoadingBar").Hide();
			else
				Page.GetFirstChild("LoadingBar").Show();
		
			declare Diff = GetDifficulty();
			
			if(Diff != LastDifficulty) {
				DifficultySwitchTime = Now;
				
				Audio.PlaySoundEvent(SoundHover, 1.0);
				
				DeselectAll();
				
				declare Panel <=> ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("Panel") as CMlFrame);
					
				(Panel.GetFirstChild("Name") as CMlLabel).SetText("...");
						
				(Panel.GetFirstChild("DifficultyCanyonCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("DifficultyStadiumCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("DifficultyValleyCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("DifficultyLagoonCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("QualityCanyonCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("QualityStadiumCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("QualityValleyCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("QualityLagoonCar") as CMlGauge).SetRatio(0.0);
				
				if(Diff == 0) ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("difficultyBar") as CMlQuad).BgColor = <1.0,1.0,1.0>;
				if(Diff == 1) ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("difficultyBar") as CMlQuad).BgColor = <0.0,1.0,0.0>;
				if(Diff == 2) ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("difficultyBar") as CMlQuad).BgColor = <0.0,0.0,1.0>;
				if(Diff == 3) ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("difficultyBar") as CMlQuad).BgColor = <1.0,0.0,0.0>;
				if(Diff == 4) ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("difficultyBar") as CMlQuad).BgColor = <0.0,0.0,0.0>;
				
				UpdateThumbnails();
			}
			
			LastDifficulty = GetDifficulty();
			
			AnimateMaps(DifficultySwitchTime);
			
			HandleRequests();
			HandleScoreRequests();
			
			declare Slider = (Page.GetFirstChild("slider") as CMlFrame);
			
			if(!MouseLeftButton) {
				Slider.DataAttributeSet("hold","false");
			}
			
			if(Slider.DataAttributeGet("hold") == "true") {
				Slider.GetFirstChild("button").RelativePosition_V3.Y = MathLib::Clamp(TextLib::ToReal(Slider.DataAttributeGet("pos")) + MouseY - TextLib::ToReal(Slider.DataAttributeGet("mouse_y")),-88.0,0.0);
			}
		
			if(Page.GetFirstChild("menu").DataAttributeGet("state") == "hidden") {
				HideMenu(TextLib::ToInteger(Page.GetFirstChild("menu").DataAttributeGet("time")),Page.GetFirstChild("menu").DataAttributeGet("action"));
			}
			else {
				ShowMenu(TextLib::ToInteger(Page.GetFirstChild("menu").DataAttributeGet("time")));
			}
		
			foreach(Button,(Page.GetFirstChild("buttons") as CMlFrame).Controls) {
				declare B <=> (Button as CMlFrame);
				
				declare Time = TextLib::ToInteger(B.DataAttributeGet("hover_time"));
				declare Value = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 200);
				
				if(B.DataAttributeGet("hover") == "true") {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <Value,Value,Value>;
					(B.GetFirstChild("text") as CMlLabel).TextColor = <1.0-Value,1.0-Value,1.0-Value>;
				}
				else {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <1.0-Value,1.0-Value,1.0-Value>;
					(B.GetFirstChild("text") as CMlLabel).TextColor = <Value,Value,Value>;
				}
				
				if(B.ControlId == "buttonTrack") {
					declare ValueTrack = AnimLib::EaseInOutSine(Now - Time, 0.0, 1.0, 500);
				
					if(B.DataAttributeGet("hover") == "true") {
						(B.GetFirstChild("track") as CMlFrame).RelativeScale = ValueTrack * 0.05 + 1;
						((B.GetFirstChild("track") as CMlFrame).GetFirstChild("name") as CMlLabel).Opacity = ValueTrack;
					}
					else {
						(B.GetFirstChild("track") as CMlFrame).RelativeScale = 1.05 - ValueTrack * 0.05;
						((B.GetFirstChild("track") as CMlFrame).GetFirstChild("name") as CMlLabel).Opacity = 1.0 - ValueTrack;
					}
				}
			}
			
			foreach(Button,(Page.GetFirstChild("buttonsSelection") as CMlFrame).Controls) {
				declare B <=> (Button as CMlFrame);
				
				declare Time = TextLib::ToInteger(B.DataAttributeGet("hover_time"));
				declare Value = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 200);
				
				if(B.DataAttributeGet("hover") == "true") {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <Value,Value,Value>;
					if(B.GetFirstChild("text") != Null)
						(B.GetFirstChild("text") as CMlLabel).TextColor = <1.0-Value,1.0-Value,1.0-Value>;
				}
				else {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <1.0-Value,1.0-Value,1.0-Value>;
					if(B.GetFirstChild("text") != Null)
						(B.GetFirstChild("text") as CMlLabel).TextColor = <Value,Value,Value>;
				}
			}
			
			foreach(Button,(Page.GetFirstChild("buttonsCustomCars") as CMlFrame).Controls) {
				declare B <=> (Button as CMlFrame);
				
				declare Time = TextLib::ToInteger(B.DataAttributeGet("hover_time"));
				declare Value = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 200);
				
				if(B.DataAttributeGet("hover") == "true") {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <Value,Value,Value>;
					if(B.GetFirstChild("text") != Null)
						(B.GetFirstChild("text") as CMlLabel).TextColor = <1.0-Value,1.0-Value,1.0-Value>;
				}
				else {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <1.0-Value,1.0-Value,1.0-Value>;
					if(B.GetFirstChild("text") != Null)
						(B.GetFirstChild("text") as CMlLabel).TextColor = <Value,Value,Value>;
				}
			}
			
			declare Button = ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("slider") as CMlFrame);
			declare V = AnimLib::EaseOutCubic(Now - TextLib::ToInteger(Button.DataAttributeGet("hover_time")), 0.0, 1.0, 100) * 0.5 + 0.25;
			
			if(Button.DataAttributeGet("hover") == "true") {
				(Button.GetFirstChild("button") as CMlQuad).BgColor = <V,V,V>;
			}
			else {
				(Button.GetFirstChild("button") as CMlQuad).BgColor = <1.0-V,1.0-V,1.0-V>;
			}
		}
	
		Void OnEvent(CMlEvent _Event) {
			declare E <=> _Event;
			
			switch(E.Type) {
				case CMlEvent::Type::MouseOver: {
					declare Frame <=> E.Control.Parent;
					
					if(E.ControlId == "button") {
						Audio.PlaySoundEvent(SoundHover, 1.0);
						Frame.DataAttributeSet("hover","true");
						Frame.DataAttributeSet("hover_time",Now^"");
						Frame.DataAttributeSet("hover_in_value",(E.Control as CMlQuad).BgColor[0]^"");
					}
					
					if(Frame.Parent.ControlId == "maps") {
						if(SelectEnvironment == -1) {
							Audio.PlaySoundEvent(SoundHover, 1.0);
							Frame.DataAttributeSet("hover","true");
							Frame.DataAttributeSet("hover_time",Now^"");
							
							declare Text Diff = "";
								
							switch(GetDifficulty()) {
								case 0: { Diff = "A"; }
								case 1: { Diff = "B"; }
								case 2: { Diff = "C"; }
								case 3: { Diff = "D"; }
								case 4: { Diff = "E"; }
							}
							
							declare Panel <=> ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("Panel") as CMlFrame);
							
							(Panel.GetFirstChild("Name") as CMlLabel).SetText(Diff ^ E.Control.Parent.ControlId);
							
							if(MapBriefDocument != Null) {								
								(Panel.GetFirstChild("DifficultyCanyonCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("CanyonCar").GetAttributeReal("Difficulty",0.0));
								(Panel.GetFirstChild("DifficultyStadiumCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("StadiumCar").GetAttributeReal("Difficulty",0.0));
								(Panel.GetFirstChild("DifficultyValleyCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("ValleyCar").GetAttributeReal("Difficulty",0.0));
								(Panel.GetFirstChild("DifficultyLagoonCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("LagoonCar").GetAttributeReal("Difficulty",0.0));
								
								(Panel.GetFirstChild("QualityCanyonCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("CanyonCar").GetAttributeReal("Quality",0.0));
								(Panel.GetFirstChild("QualityStadiumCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("StadiumCar").GetAttributeReal("Quality",0.0));
								(Panel.GetFirstChild("QualityValleyCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("ValleyCar").GetAttributeReal("Quality",0.0));
								(Panel.GetFirstChild("QualityLagoonCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("LagoonCar").GetAttributeReal("Quality",0.0));
								
								if(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("CanyonCar").GetAttributeInteger("Marked",0) == 1)
									Panel.GetFirstChild("MarkedCanyonCar").Show();
								else
									Panel.GetFirstChild("MarkedCanyonCar").Hide();
									
								if(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("StadiumCar").GetAttributeInteger("Marked",0) == 1)
									Panel.GetFirstChild("MarkedStadiumCar").Show();
								else
									Panel.GetFirstChild("MarkedStadiumCar").Hide();
									
								if(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("ValleyCar").GetAttributeInteger("Marked",0) == 1)
									Panel.GetFirstChild("MarkedValleyCar").Show();
								else
									Panel.GetFirstChild("MarkedValleyCar").Hide();
								
								if(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("LagoonCar").GetAttributeInteger("Marked",0) == 1)
									Panel.GetFirstChild("MarkedLagoonCar").Show();
								else
									Panel.GetFirstChild("MarkedLagoonCar").Hide();
							}
						}
					}
				}
				case CMlEvent::Type::MouseOut: {
					declare Frame <=> E.Control.Parent;
					
					if(E.ControlId == "button") {
						Frame.DataAttributeSet("hover","false");
						Frame.DataAttributeSet("hover_time",Now^"");
						Frame.DataAttributeSet("hover_out_value",(E.Control as CMlQuad).BgColor[0]^"");
					}
					if(SelectEnvironment == -1) {
						if(E.Control.Parent.Parent.ControlId == "maps") {
							Audio.PlaySoundEvent(SoundHover, 1.0);
							Frame.DataAttributeSet("hover","false");
							Frame.DataAttributeSet("hover_time",Now^"");
						}
						
						if(Frame.Parent.ControlId == "maps") {
							declare Panel <=> ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("Panel") as CMlFrame);
						
							(Panel.GetFirstChild("Name") as CMlLabel).SetText("...");
							
							(Panel.GetFirstChild("DifficultyCanyonCar") as CMlGauge).SetRatio(0.0);
							(Panel.GetFirstChild("DifficultyStadiumCar") as CMlGauge).SetRatio(0.0);
							(Panel.GetFirstChild("DifficultyValleyCar") as CMlGauge).SetRatio(0.0);
							(Panel.GetFirstChild("DifficultyLagoonCar") as CMlGauge).SetRatio(0.0);
							(Panel.GetFirstChild("QualityCanyonCar") as CMlGauge).SetRatio(0.0);
							(Panel.GetFirstChild("QualityStadiumCar") as CMlGauge).SetRatio(0.0);
							(Panel.GetFirstChild("QualityValleyCar") as CMlGauge).SetRatio(0.0);
							(Panel.GetFirstChild("QualityLagoonCar") as CMlGauge).SetRatio(0.0);
						}
					}
				}
				case CMlEvent::Type::MouseClick: {
					if(E.Control.Parent.ControlId == "Scanner") {
						if(E.ControlId == "ZoneNext") {
							if(CurrentZone + 1 > Zones.count - 1)
								CurrentZone = 0;
							else
								CurrentZone+=1;
								
							ReloadLeaderboard(SelectEnvironment);
						}
						if(E.ControlId == "ZonePrev") {
							if(CurrentZone - 1 < 0)
								CurrentZone = Zones.count - 1;
							else
								CurrentZone-=1;
							
							ReloadLeaderboard(SelectEnvironment);
						}
						
						if(E.ControlId == "CarNext") {
							if(CurrentCar + 1 > Cars.count - 1)
								CurrentCar = 0;
							else
								CurrentCar+=1;
							
							RefreshTrack();
						}
						if(E.ControlId == "CarPrev") {
							if(CurrentCar - 1 < 0)
								CurrentCar = Cars.count - 1;
							else
								CurrentCar-=1;
								
							RefreshTrack();
						}
					}
					
					if(E.ControlId == "Lock") {						
						DeselectAll();
						
						foreach(Tile,(Page.GetFirstChild("maps") as CMlFrame).Controls) {
							(Tile as CMlFrame).DataAttributeSet("hover_time",Now^"");
						}
					}
					if(E.ControlId == "hover") {
						Audio.PlaySoundEvent(SoundClick, 1.0);
						if(!Page.GetFirstChild("Lock").Visible)
						if(E.Control.Parent.Parent.ControlId == "maps") {
							declare Text Diff = "";
							
							switch(GetDifficulty()) {
								case 0: { Diff = "A"; }
								case 1: { Diff = "B"; }
								case 2: { Diff = "C"; }
								case 3: { Diff = "D"; }
								case 4: { Diff = "E"; }
							}
							
							foreach(Tile,E.Control.Parent.Parent.Controls) {
								if(Tile != E.Control.Parent)
									(Tile as CMlFrame).GetFirstChild("select").Hide();
							}
							
							if(E.Control.Parent.GetFirstChild("select").Visible) {
								E.Control.Parent.GetFirstChild("select").Hide();
								
								Page.GetFirstChild("Lock").Hide();
								
								SelectEnvironment = -1;
								SelectDifficulty = 0;
								SelectMap = 0;
							}
							else {
								E.Control.Parent.GetFirstChild("select").Show();
								
								Page.GetFirstChild("Lock").Show();
								
								switch(Environment) {
									case "Canyon": { SelectEnvironment = 0; }
									case "Stadium": { SelectEnvironment = 1; }
									case "Valley": { SelectEnvironment = 2; }
									case "Lagoon": { SelectEnvironment = 3; }
								}
								
								SelectDifficulty = GetDifficulty();
								SelectMap = TextLib::ToInteger(E.Control.Parent.ControlId);
								
								RefreshTrack();
							}
							
							//SendCustomEvent("COMMAND_PLAYMAP", [Environment, ""^GetDifficulty(), E.Control.Parent.ControlId,"Any"]);
						}
					}
					
					if(E.ControlId == "PlayCanyonCar") SendCustomEvent("COMMAND_PLAYMAP", [Environment, ""^SelectDifficulty, ""^SelectMap,"CanyonCar"]);
					if(E.ControlId == "PlayStadiumCar") SendCustomEvent("COMMAND_PLAYMAP", [Environment, ""^SelectDifficulty, ""^SelectMap,"StadiumCar"]);
					if(E.ControlId == "PlayValleyCar") SendCustomEvent("COMMAND_PLAYMAP", [Environment, ""^SelectDifficulty, ""^SelectMap,"ValleyCar"]);
					if(E.ControlId == "PlayLagoonCar") SendCustomEvent("COMMAND_PLAYMAP", [Environment, ""^SelectDifficulty, ""^SelectMap,"LagoonCar"]);
					
					if(E.Control.Parent.Parent.ControlId == "buttons") {
						if(E.Control.Parent.ControlId == "buttonPlay") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Audio.PlaySoundEvent(SoundElectric, 1.0);
							
							Page.GetFirstChild("menu").DataAttributeSet("state","hidden");
							Page.GetFirstChild("menu").DataAttributeSet("time",Now^"");
							Page.GetFirstChild("menu").DataAttributeSet("action","");
				
							(Page.GetFirstChild("menu") as CMlFrame).GetFirstChild("block").Show();
							Page.GetFirstChild("selection").Show();
						}
						if(E.Control.Parent.ControlId == "buttonProfile") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Audio.PlaySoundEvent(SoundElectric, 1.0);
							
							Page.GetFirstChild("menu").DataAttributeSet("state","hidden");
							Page.GetFirstChild("menu").DataAttributeSet("time",Now^"");
							Page.GetFirstChild("menu").DataAttributeSet("action","menu_profile");
						}
						if(E.Control.Parent.ControlId == "buttonExit") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Audio.PlaySoundEvent(SoundElectric, 1.0);
							
							Page.GetFirstChild("menu").DataAttributeSet("state","hidden");
							Page.GetFirstChild("menu").DataAttributeSet("time",Now^"");
							Page.GetFirstChild("menu").DataAttributeSet("action","quit");
						}
						if(E.Control.Parent.ControlId == "buttonTrack") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							
							SendCustomEvent("COMMAND_PLAYMAP", [TrackDayEnvironment, TrackDayDifficulty, TrackDayMap,"Any"]);
						}
					}
					if(E.Control.Parent.Parent.ControlId == "buttonsSelection") {
						if(E.Control.Parent.ControlId == "buttonPlay") {
							if(SelectEnvironment != -1)
								SendCustomEvent("COMMAND_PLAYMAP", [Environment, ""^SelectDifficulty, ""^SelectMap,"Any"]);
						}
						if(E.Control.Parent.ControlId == "buttonBack") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							
							Page.GetFirstChild("menu").DataAttributeSet("state","shown");
							Page.GetFirstChild("menu").DataAttributeSet("time",Now^"");
							Page.GetFirstChild("menu").DataAttributeSet("action","");
							
							(Page.GetFirstChild("menu") as CMlFrame).GetFirstChild("block").Hide();
							Page.GetFirstChild("selection").Hide();
						}
						
						if(E.Control.Parent.ControlId == "buttonCanyon") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Environment = "Canyon";
							DeselectAll();
							
							foreach(Tile,(Page.GetFirstChild("maps") as CMlFrame).Controls) {
								(Tile as CMlFrame).DataAttributeSet("hover_time",Now^"");
							}
							
							UpdateThumbnails();
						}
						if(E.Control.Parent.ControlId == "buttonStadium") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Environment = "Stadium";
							DeselectAll();
							
							foreach(Tile,(Page.GetFirstChild("maps") as CMlFrame).Controls) {
								(Tile as CMlFrame).DataAttributeSet("hover_time",Now^"");
							}
							
							UpdateThumbnails();
						}
						if(E.Control.Parent.ControlId == "buttonValley") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Environment = "Valley";
							DeselectAll();
							
							foreach(Tile,(Page.GetFirstChild("maps") as CMlFrame).Controls) {
								(Tile as CMlFrame).DataAttributeSet("hover_time",Now^"");
							}
							
							UpdateThumbnails();
						}
						if(E.Control.Parent.ControlId == "buttonLagoon") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Environment = "Lagoon";
							DeselectAll();
							
							foreach(Tile,(Page.GetFirstChild("maps") as CMlFrame).Controls) {
								(Tile as CMlFrame).DataAttributeSet("hover_time",Now^"");
							}
							
							UpdateThumbnails();
						}
						if(E.Control.Parent.ControlId == "buttonPlayOnline") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							SendCustomEvent("PLAY_POUTREL_SERVER", Text[]);
						}
						if(E.Control.Parent.ControlId == "buttonCustomCars") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Page.GetFirstChild("selection").Hide();
							Page.GetFirstChild("FrameCustomCars").Show();
							LoadCustomCars();
						}
					}
					if(E.Control.Parent.Parent.ControlId == "buttonsCustomCars") {
						if(E.Control.Parent.ControlId == "buttonBack") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Page.GetFirstChild("selection").Show();
							Page.GetFirstChild("FrameCustomCars").Hide();
						}
						if(E.Control.Parent.ControlId == "buttonCreate") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							SendCustomEvent("OPEN_ITEMEDITOR", Text[]);
						}
					}
					
					if(E.Control.Parent.ControlId == "slider") {
						Audio.PlaySoundEvent(SoundClick, 1.0);
					
						if(E.ControlId == "QuadBack") {
							E.Control.Parent.GetFirstChild("button").RelativePosition_V3.Y = MathLib::Clamp(MouseY-40,-88.0,0.0);
						}
						else {
							E.Control.Parent.DataAttributeSet("hold","true");
							E.Control.Parent.DataAttributeSet("mouse_y",MouseY^"");
							E.Control.Parent.DataAttributeSet("pos",E.Control.RelativePosition_V3.Y^"");
						}
					}
				}
				case CMlEvent::Type::EntrySubmit: {
					declare persistent Text[] NEM_CustomCars for LocalUser;
							
					if(E.ControlId == "EntryCar1") NEM_CustomCars[0] = (Page.GetFirstChild("EntryCar1") as CMlEntry).Value;
					else if(E.ControlId == "EntryCar2") NEM_CustomCars[1] = (Page.GetFirstChild("EntryCar2") as CMlEntry).Value;
					else if(E.ControlId == "EntryCar3") NEM_CustomCars[2] = (Page.GetFirstChild("EntryCar3") as CMlEntry).Value;
					else if(E.ControlId == "EntryCar4") NEM_CustomCars[3] = (Page.GetFirstChild("EntryCar4") as CMlEntry).Value;
					else if(E.ControlId == "EntryCar5") NEM_CustomCars[4] = (Page.GetFirstChild("EntryCar5") as CMlEntry).Value;
				}
			}
		}
		
		main() {		
			OnInit();
			OnStart();
		
			while(True) {
				OnLoop();
			
				foreach(Event,PendingEvents) {
					OnEvent(Event);
				}
			
				yield;
			}
		}
	-->
	</script>
</manialink>